# Production Environment Configuration
# This file contains production-ready settings
# IMPORTANT: Never commit real credentials to version control

# ==============================================================================
# Environment
# ==============================================================================
NODE_ENV=production

# ==============================================================================
# Server Configuration
# ==============================================================================
PORT=3002

# ==============================================================================
# AI Provider Selection (HIPAA Compliant)
# ==============================================================================
# Production uses Ollama for HIPAA compliance (all processing is local)
EMBEDDING_PROVIDER=ollama
LLM_PROVIDER=ollama

# ==============================================================================
# Ollama Configuration (Local AI Processing - HIPAA Compliant)
# ==============================================================================
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
OLLAMA_EMBEDDING_DIMENSIONS=768
OLLAMA_LLM_MODEL=llama3
OLLAMA_MAX_TOKENS=2000
OLLAMA_TEMPERATURE=0.0
OLLAMA_TIMEOUT=300000

# ==============================================================================
# Enrichment Feature Flags (Phase 8 Rollout)
# ==============================================================================
# Start with features DISABLED for safe production deployment
# Enable gradually: 10% → 50% → 100%

# Enable multi-hop retrieval (default: false for initial deploy)
ENABLE_MULTI_HOP=false

# Enable reasoning-rich prompts (default: false for initial deploy)
ENABLE_REASONING=false

# Maximum relationship hops (0, 1, or 2)
MAX_HOPS=0

# Relationship boost (0.0-1.0)
RELATIONSHIP_BOOST=0.3

# Reasoning style (detailed | concise)
REASONING_STYLE=detailed

# Percentage of traffic to use enrichment (0-100)
# Start at 0%, gradually increase to 10%, 50%, then 100%
ENRICHMENT_ROLLOUT_PERCENTAGE=0

# ==============================================================================
# Phase 9: Hallucination Prevention & Quality Assurance
# ==============================================================================
# Start disabled for initial deploy, enable after validation
ENABLE_CONVERSATION_HISTORY=false
ENABLE_GROUNDING_VERIFICATION=false
ENABLE_CONSISTENCY_CHECKING=false
ENABLE_CONFIDENCE_CALIBRATION=false
ENABLE_HALLUCINATION_DETECTION=false

# Quality thresholds
GROUNDING_SCORE_THRESHOLD=0.7
CONSISTENCY_SCORE_THRESHOLD=0.8
CONFIDENCE_SCORE_THRESHOLD=0.6
HALLUCINATION_RISK_THRESHOLD=0.3

# Multi-response detection settings
HALLUCINATION_DETECTION_SAMPLES=3
HALLUCINATION_DETECTION_TEMP_RANGE=0.1

# ==============================================================================
# Monitoring & Metrics
# ==============================================================================
ENABLE_METRICS=true
METRICS_COLLECTION_INTERVAL_MS=60000

# Alert thresholds
ALERT_ERROR_RATE_THRESHOLD=0.05
ALERT_LATENCY_P95_THRESHOLD_MS=3000
ALERT_LATENCY_P99_THRESHOLD_MS=5000
